:root {
  --bg: #060b1f;
  --bg-soft: #0b1430;
  --panel: #111c3e;
  --card: #16254d;
  --line: rgba(136, 160, 216, 0.22);
  --text: #ecf2ff;
  --muted: #8ea3d4;
  --theme-accent: #16d6c4;
  --theme-accent-2: #20a6ff;
  --theme-highlight: #c7fff6;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Sora", sans-serif;
  color: var(--text);
  background: linear-gradient(160deg, #040817 0%, #0a1230 100%);
}

.app-shell {
  min-height: 100vh;
  display: grid;
  grid-template-columns: 72px 1fr;
}

.sidebar {
  background: linear-gradient(180deg, #050a1b 0%, #0a1230 100%);
  border-right: 1px solid var(--line);
  display: grid;
  grid-template-rows: auto 1fr auto;
  padding: 12px 10px;
  gap: 18px;
}

.brand,
.side-user {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  display: grid;
  place-items: center;
  font-weight: 700;
  margin: 0 auto;
  background: #0f1c40;
  border: 1px solid var(--line);
}

.side-nav {
  display: grid;
  gap: 10px;
  align-content: start;
}

.side-btn {
  border: 1px solid var(--line);
  background: #0e1a3d;
  color: var(--muted);
  border-radius: 10px;
  height: 40px;
  font-size: 0.74rem;
  cursor: pointer;
}

.side-btn.active {
  color: var(--text);
  border-color: var(--theme-accent);
}

.main-area {
  display: grid;
  grid-template-rows: auto 1fr;
}

.topbar {
  border-bottom: 1px solid var(--line);
  padding: 16px 22px;
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 20px;
  align-items: end;
  background: rgba(6, 12, 31, 0.9);
}

.kicker {
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  font-size: 0.68rem;
  color: var(--theme-accent);
  font-weight: 700;
}

.title-wrap h1 {
  margin: 4px 0 0;
  font-size: 1.4rem;
}

.top-nav {
  justify-self: end;
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
}

.top-link {
  color: var(--muted);
  text-decoration: none;
  font-weight: 600;
  font-size: 0.93rem;
  padding-bottom: 8px;
  border-bottom: 2px solid transparent;
}

.top-link.active {
  color: var(--text);
  border-bottom-color: #ff4f6d;
}

.content {
  padding: 18px;
}

.panel {
  --theme-accent: #16d6c4;
  --theme-accent-2: #20a6ff;
  --theme-highlight: #c7fff6;
  background: linear-gradient(180deg, var(--panel), #101b3b);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 14px;
}

.tabs {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
  margin-bottom: 12px;
}

.tab {
  border: 1px solid var(--line);
  background: #1a2a56;
  color: var(--muted);
  border-radius: 10px;
  padding: 10px;
  font-family: inherit;
  font-weight: 600;
  cursor: pointer;
}

.tab.active {
  color: #061122;
  border-color: transparent;
  background: linear-gradient(135deg, var(--theme-accent), var(--theme-accent-2));
}

.tab-panel {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
}

.tab-panel[hidden],
.race-mode-panel[hidden] {
  display: none;
}

.card {
  background: linear-gradient(180deg, var(--card), #122044);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 12px;
}

.panel-note,
.mode-note,
label,
.result-detail,
.result-label,
.split-item span {
  color: var(--muted);
}

.panel-note,
.mode-note {
  margin: 0 0 10px;
  font-size: 0.9rem;
}

.field {
  display: grid;
  gap: 7px;
}

label {
  font-size: 0.86rem;
}

input[type="text"],
select,
input[type="range"] {
  width: 100%;
}

input[type="text"],
select {
  background: #0d1736;
  color: var(--text);
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 10px;
  font-family: "Space Mono", monospace;
}

input[type="range"] {
  accent-color: var(--theme-accent);
}

.pace-group {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}

.race-mode-panel {
  margin-top: 8px;
  background: #0f1a3a;
  border: 1px dashed var(--line);
  border-radius: 10px;
  padding: 10px;
}

.result-card {
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.03);
}

.result-label {
  margin: 0;
  font-size: 0.85rem;
}

.result-value {
  margin: 8px 0 2px;
  font-family: "Space Mono", monospace;
  font-size: clamp(1.7rem, 5vw, 2.4rem);
  color: var(--theme-highlight);
}

.result-detail {
  margin: 0;
}

.track-stage {
  display: grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 10px;
}

#track-svg {
  width: 100%;
  border-radius: 14px;
  background: radial-gradient(circle at 50% 50%, #14532d 0%, #0f3f24 42%, #0c2f1a 100%);
  border: 1px solid var(--line);
  padding: 8px;
}

.track-lane {
  fill: none;
  stroke: rgba(195, 62, 62, 0.95);
  stroke-width: 7;
}

#track-path {
  fill: none;
  stroke: transparent;
  stroke-width: 2;
}

#track-runner {
  fill: var(--theme-accent);
  filter: drop-shadow(0 0 8px rgba(16, 185, 129, 0.7));
}

.track-marker-line {
  stroke: #f8fafc;
  stroke-width: 2;
}

.track-marker-label {
  fill: #e8efff;
  font: 700 11px "Space Mono", monospace;
}

.track-marker-start {
  fill: #e2e8f0;
  font: 700 11px "Sora", sans-serif;
}

.track-live {
  background: #101b3c;
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 10px;
  display: grid;
  gap: 7px;
  align-content: start;
}

#track-start-btn {
  border: 0;
  border-radius: 10px;
  padding: 10px;
  font-family: inherit;
  font-weight: 700;
  color: #061122;
  background: linear-gradient(135deg, var(--theme-accent), var(--theme-accent-2));
  cursor: pointer;
}

.split-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
  gap: 8px;
}

.split-item {
  border: 1px solid var(--line);
  border-radius: 10px;
  background: #0f1a3a;
  padding: 10px;
  display: grid;
  gap: 6px;
}

.split-item strong {
  font-family: "Space Mono", monospace;
  color: var(--text);
}

.split-item.reached {
  border-color: var(--theme-accent);
}

.panel[data-theme="converter"] {
  --theme-accent: #16d6c4;
  --theme-accent-2: #20a6ff;
  --theme-highlight: #c7fff6;
}

.panel[data-theme="distance"] {
  --theme-accent: #facc15;
  --theme-accent-2: #22c55e;
  --theme-highlight: #f7fee7;
}

.panel[data-theme="race"] {
  --theme-accent: #a78bfa;
  --theme-accent-2: #f43f5e;
  --theme-highlight: #fce7f3;
}

.panel[data-theme="track"] {
  --theme-accent: #22c55e;
  --theme-accent-2: #06b6d4;
  --theme-highlight: #dcfce7;
}

@media (max-width: 980px) {
  .topbar {
    grid-template-columns: 1fr;
    align-items: start;
  }

  .top-nav {
    justify-self: start;
  }

  .tabs {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 760px) {
  .app-shell {
    grid-template-columns: 1fr;
  }

  .sidebar {
    grid-template-columns: auto 1fr auto;
    grid-template-rows: 1fr;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
  }

  .side-nav {
    display: flex;
    gap: 8px;
    justify-content: center;
  }

  .side-btn {
    width: 70px;
  }

  .tabs,
  .pace-group,
  .track-stage {
    grid-template-columns: 1fr;
  }
}
